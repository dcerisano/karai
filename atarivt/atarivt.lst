0 BLANK=2000
1 DLI=3000
2 GOSUB DLI
10 REM INIT -------------------------
12 SETCOLOR 1,12,6:SETCOLOR 2,12,3
13 SETCOLOR 4,12,3
20 POKE 752,1:POKE 77,0
25 POKE 65,0:POKE 755,0
50 DIM F$(1280*2),F1$(40),E$(40)
52 DIM F2$(1280)
55 FLIP=0:ERRS=0
60 DL=PEEK(560)+PEEK(561)*256
70 SA=ADR(F$)
75 SH=INT(SA/256)
80 SL=INT(SA-SH*256)
90 GOSUB BLANK
170 POKE 77,120
180 GOTO 1000
200 TRAP 1000
205 IF FLIP=0 THEN FLIP=1:GOTO 220
206 IF FLIP=1 THEN FLIP=0:GOTO 220
220 OPEN #1,4,0,"D2:FRAME.DAT"
235 TRAP 1100
240 FOR I=0 TO 22
250 INPUT #1,F1$
260 F$(1024*FLIP+I*40+1)=F1$(1,40)
270 NEXT I
280 CLOSE #1
282 T=PEEK(20)+PEEK(19)*256
286 IF PEEK(20)+PEEK(19)*256=T THEN 282
290 POKE DL+4,SL:POKE DL+5,SH+FLIP*4
295 ERRS=0
300 GOTO 200
1000 REM FRAME NOT FOUND ------------
1010 E$="ATARIVT CONNECTING TO HOST"
1020 GOTO 1200
1100 REM BAD FRAME ------------------
1105 POKE 77,120
1106 CLOSE #1
1110 GOTO 200
1200 REM SWAP
1205 GOSUB BLANK
1208 POKE 88,SL:POKE 89,SH+FLIP*4
1210 POSITION 8,11
1220 PRINT E$
1230 POKE DL+4,SL:POKE DL+5,SH+FLIP*4
1235 FOR X=1 TO 200:NEXT X
1240 CLOSE #1
1250 GOTO 200
2000 REM BLANK THE PAGES
2010 F$=CHR$(0):F$(1280*2)=CHR$(0)
2030 F$(2)=F$
2035 FOR X=1 TO 100:NEXT X
2040 RETURN 
3000 DATA 72
3010 DATA 173,11,212
3040 DATA 141,10,212
3050 DATA 141,23,208
3055 DATA 73,255
3060 DATA 141,24,208
3065 DATA 141,26,208
3070 DATA 104
3080 DATA 64
4010 GRAPHICS 0
4015 RESTORE 
4020 TRAP 4140:I=1536
4030 READ A:POKE I,A:I=I+1
4040 GOTO 4030
4140 REM ENABLE DLI
4150 POKE 512,0:POKE 513,6
4160 DL=PEEK(560)+256*PEEK(561)
4165 POKE DL,PEEK(DL)+128
4170 POKE DL+8,130:POKE DL+22,130
4200 POKE 54286,192
4210 RETURN 
